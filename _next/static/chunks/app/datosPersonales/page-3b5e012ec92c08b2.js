(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[875],{914:function(e,a,s){Promise.resolve().then(s.bind(s,9234))},5420:function(e,a,s){"use strict";let l,t;s.d(a,{Kk:function(){return c},Xb:function(){return n},Xt:function(){return o},d0:function(){return d},e5:function(){return r},w7:function(){return i}}),s(5243),t=(l=s(6081)).auth(),l&&!l.apps.length&&l.initializeApp({apiKey:"AIzaSyDtekOa7fDUer_k7CeUYK93NDkpYm642U0",authDomain:"pequepulso-d64fb.firebaseapp.com",databaseURL:"https://pequepulso-d64fb-default-rtdb.firebaseio.com",projectId:"pequepulso-d64fb",storageBucket:"pequepulso-d64fb.appspot.com",messagingSenderId:"246492891800",appId:"1:246492891800:web:2d0af2027be31f4e729eed",measurementId:"G-HGL2P05SLH"});let r=async(e,a)=>{try{return(await t.signInWithEmailAndPassword(e,a)).user}catch(e){throw e}},n=async(e,a)=>{try{return(await t.createUserWithEmailAndPassword(e,a)).user}catch(e){throw e}},i=async()=>{try{await t.signOut()}catch(e){throw e}},o=async()=>{let e=t.currentUser;if(!e)return console.log("No user is signed in"),null;await e.sendEmailVerification().then(()=>(console.log("Confirmation email sent"),e)).catch(e=>{console.error("Error sending confirmation email: ",e)})},c=async()=>{let e=t.currentUser;return e?(await e.reload(),e.emailVerified):(console.log("No user is signed in"),!1)},d=()=>new Promise((e,a)=>{let s=l.auth().currentUser;s?l.database().ref("usuarios/"+s.uid).on("value",s=>{let l=s.val();if(l&&l.padre&&l.padre.nombre){let a=l.padre.nombre;console.log(a),e(a)}else a("No data found")}):a("No user found")})},7907:function(e,a,s){"use strict";var l=s(5313);s.o(l,"useRouter")&&s.d(a,{useRouter:function(){return l.useRouter}})},9234:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return x}});var l=s(7437),t=s(2265),r=s(6081);s(8501),s(5243),s(2607);var n=s(345),i=s.n(n),o=s(8792),c=s(7907),d=s(5420),u=s(8024),m=s(7535);function x(){let[e,a]=(0,t.useState)(!1),[s,n]=(0,t.useState)(!0),[x,h]=(0,t.useState)(""),p=async()=>{await signOut(),window.alert("Sesion cerrada")};(0,t.useEffect)(()=>{let e=r.default.auth().currentUser;if(e){let a=r.default.database().ref("usuarios/".concat(e.uid));return r.default.database().ref("Pulseras/Pulsera1").update({Usuario:e.uid}).then(()=>{console.log("Usuario actualizado exitosamente.")}).catch(e=>{console.error("Error al actualizar el usuario:",e)}),a.on("value",e=>{let a=e.val();if(a){let e=a.padre.foto;console.log(e),h(e),n(!1)}},e=>{console.error("Error al leer los datos: ",e)}),()=>{a.off("value")}}console.log("Usuario no autenticado")},[]);let[f,v]=(0,t.useState)(""),[g,N]=(0,t.useState)(null);(0,t.useEffect)(()=>{let e=r.default.auth().onAuthStateChanged(e=>{(0,d.d0)().then(e=>{v(e)}).catch(e=>{console.error(e)})});return()=>e()},[]),(0,t.useEffect)(()=>{P()},[]);let j=()=>new Date().toISOString().split("T")[0],b=(0,c.useRouter)(),[_,y]=(0,t.useState)({nombre:"",fechaNac:"",sexo:"",numPuls:"",direccion:"",telefono:""}),[w,F]=(0,t.useState)({nombre:"",fechaNac:"",sexo:"",peso:"",estatura:"",padPrev:"",antFam:""}),P=()=>{let e=r.default.auth().onAuthStateChanged(e=>{e&&r.default.database().ref("usuarios/"+e.uid).on("value",e=>{let a=e.val();a&&(y(a.padre||{}),F(a.bebe||{}),h(a.padre.foto))})});return()=>e()},S=async()=>{if(!g)return x;{let e=r.default.storage().ref().child(g.name);return await e.put(g),await e.getDownloadURL()}},C=async e=>{e.preventDefault();let a=await S();if(!_.nombre||!_.fechaNac||!_.sexo||!_.numPuls||!_.direccion||!_.telefono){console.error("Please fill in all padre fields"),window.alert("Favor de llenar todos los campos");return}if(!w.nombre||!w.fechaNac||!w.sexo||!w.peso||!w.estatura||!w.padPrev||!w.antFam){console.error("Please fill in all bebe fields"),window.alert("Favor de llenar todos los campos");return}if(isNaN(w.peso)){console.error("Peso debe ser un numero"),window.alert("El peso debe ser un numero");return}if(isNaN(w.estatura)){console.error("Estatura debe ser un numero"),window.alert("La estatura debe ser un numero");return}if(isNaN(_.numPuls)){console.error("El numero de pulsera debe ser un numero"),window.alert("El numero de pulsera debe ser un numero");return}if(isNaN(_.telefono)){console.error("Telefono debe ser un numero"),window.alert("El telefono debe ser un numero");return}let[s,l,t]=w.fechaNac.split("-").map(Number);console.log("Day: ".concat(t,", Month: ").concat(l,", Year: ").concat(s));let n=r.default.auth().currentUser;r.default.database().ref("usuarios/"+n.uid+"/padre").set({nombre:_.nombre,fechaNac:_.fechaNac,sexo:_.sexo,numPuls:_.numPuls,direccion:_.direccion,telefono:_.telefono,foto:a}).then(()=>{console.log("Data sent to Firebase successfully!"),b.replace("/datosPersonalesFijos")}).catch(e=>{console.error("Error sending data to Firebase:",e)}),r.default.database().ref("usuarios/"+n.uid+"/bebe").set({nombre:w.nombre,fechaNac:w.fechaNac,fechaNacSplit:{ano:s,mes:l,dia:t},sexo:w.sexo,peso:w.peso,estatura:w.estatura,padPrev:w.padPrev,antFam:w.antFam}).then(()=>{console.log("Data sent to Firebase successfully!")}).catch(e=>{console.error("Error sending data to Firebase:",e)})};return(0,l.jsx)("main",{className:"bg-gradient-pink",children:(0,l.jsxs)("div",{className:"bg-gradient-pink min-h-screen",children:[(0,l.jsxs)("div",{className:"flex justify-center bg-teal-700/50 top-0 size-full",children:[(0,l.jsx)(o.default,{href:"/tiempoReal",children:(0,l.jsx)("div",{className:"flex items-center mt-4 ml-4 text-white cursor-pointer",title:"Volver a monitoreo",children:(0,l.jsx)(u.G,{icon:m.acZ,className:"mr-2 mb-2"})})}),(0,l.jsxs)("div",{className:"flex object-center flex-col justify-center block px-4 py-2 text-gray-800 w-full object-left",children:[(0,l.jsxs)("div",{className:"flex justify-center",children:["Hello ",f]}),(0,l.jsx)("div",{className:"flex justify-center object-center rounded-full w-10 h-10 mx-auto my-auto",children:(0,l.jsx)("img",{className:"rounded-full",src:x})})]}),(0,l.jsxs)("div",{className:"mx-8 relative",children:[(0,l.jsxs)("button",{type:"submit",onClick:()=>a(!e),className:"inline-block px-4 py-2 text-white",style:{whiteSpace:"nowrap"},children:[(0,l.jsx)(u.G,{icon:m.m08,className:"mr-2 "}),"Mi perfil"]}),e&&(0,l.jsx)("div",{className:"absolute mt-2 w-48 bg-white rounded-lg shadow-lg right-0",children:(0,l.jsx)("ul",{children:(0,l.jsxs)("li",{children:[(0,l.jsx)(o.default,{href:"/datosPersonalesFijos",children:(0,l.jsx)("button",{className:"block px-4 py-2 text-gray-800 hover:bg-gray-300 w-full text-left",children:"Configuraci\xf3n de cuenta."})}),(0,l.jsx)(o.default,{href:"/Iniciosesion",children:(0,l.jsx)("button",{type:"submit",className:"block px-4 py-2 text-gray-800 hover:bg-gray-300 w-full text-left",onClick:p,children:"Cerrar sesi\xf3n."})})]})})})]})]}),(0,l.jsxs)("form",{onSubmit:C,children:[(0,l.jsx)("h1",{className:"text-2xl font-bold text-black text-center my-4",children:"Rellena todos los campos"}),(0,l.jsxs)("div",{className:"flex flex-row",children:[(0,l.jsxs)("div",{className:"flex-auto w-64 bg-gray-100 mb-2 rounded-md pt-4 mx-4",children:[(0,l.jsx)("img",{src:"/papa.png",alt:"Beb\xe9",className:"rounder-full w-24 h-24 object-cover mx-auto"}),(0,l.jsxs)("div",{className:"flex flex-col",children:[(0,l.jsxs)("div",{className:"flex flex-row",children:[(0,l.jsxs)("div",{className:"flex flex-col mx-3",children:[(0,l.jsx)("div",{className:"mx-2",children:"Nombre del padre"}),(0,l.jsx)("div",{children:(0,l.jsx)("input",{type:"text",className:i().inputField,placeholder:"Nombre Padre",value:_.nombre,onChange:e=>{y({..._,nombre:e.target.value})}})})]}),(0,l.jsxs)("div",{className:"flex flex-col",children:[(0,l.jsx)("div",{className:"mx-2",children:" Fecha de nacimiento"}),(0,l.jsx)("div",{children:(0,l.jsx)("input",{type:"date",max:j(),className:i().inputField,placeholder:"Fecha de Nacimiento",value:_.fechaNac,onChange:e=>{y({..._,fechaNac:e.target.value})}})})]}),(0,l.jsxs)("div",{className:"flex flex-col",children:[(0,l.jsx)("div",{className:"mx-2",children:"Sexo"}),(0,l.jsx)("div",{children:(0,l.jsxs)("select",{className:i().inputField,value:_.sexo,onChange:e=>{y({..._,sexo:e.target.value})},children:[(0,l.jsx)("option",{value:"",children:"Select..."}),(0,l.jsx)("option",{value:"M",children:"Masculino"}),(0,l.jsx)("option",{value:"F",children:"Femenino"})]})})]})]}),(0,l.jsxs)("div",{className:"flex flex-row",children:[(0,l.jsxs)("div",{className:"flex flex-col mx-3",children:[(0,l.jsx)("div",{className:"mx-2",children:"Numero de Pulsera"}),(0,l.jsx)("div",{children:(0,l.jsx)("input",{type:"text",className:i().inputField,placeholder:"Numero de Pulsera",value:_.numPuls,onChange:e=>{y({..._,numPuls:e.target.value})}})})]}),(0,l.jsxs)("div",{className:"flex flex-col",children:[(0,l.jsx)("div",{className:"mx-2",children:"Direccion"}),(0,l.jsx)("div",{children:(0,l.jsx)("input",{type:"text",className:i().inputField,placeholder:"Direccion",value:_.direccion,onChange:e=>{y({..._,direccion:e.target.value})}})})]}),(0,l.jsxs)("div",{className:"flex flex-col",children:[(0,l.jsx)("div",{className:"mx-2",children:"Telefono"}),(0,l.jsx)("div",{children:(0,l.jsx)("input",{type:"tel",className:i().inputField,placeholder:"Telefono (10 digitos)",value:_.telefono,onChange:e=>{y({..._,telefono:e.target.value})}})})]})]}),(0,l.jsx)("div",{className:"flex flex-row",children:(0,l.jsxs)("div",{className:"flex flex-col mx-3",children:[(0,l.jsx)("div",{className:"mx-2 my-2",children:"Fotografia"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("input",{type:"file",onChange:e=>{N(e.target.files[0])}})," "]})]})})]})]}),(0,l.jsxs)("div",{className:"flex-auto w-64 bg-gray-100 mb-2 rounded-md pt-4 mx-4",children:[(0,l.jsx)("img",{src:"/bebe.png",alt:"Beb\xe9",className:"rounder-full w-24 h-24 object-cover mx-auto"}),(0,l.jsxs)("div",{className:"flex flex-col",children:[(0,l.jsxs)("div",{className:" flex flex-row",children:[(0,l.jsxs)("div",{className:"flex flex-col mx-3",children:[(0,l.jsxs)("div",{className:"mx-2",children:[(0,l.jsx)("label",{className:"text-sm text-gray-600",children:"Nombre Beb\xe9"})," "]}),(0,l.jsx)("div",{className:"w-50",children:(0,l.jsx)("input",{type:"text",className:"".concat(i().inputField," mx-auto"),placeholder:"Nombre beb\xe9",value:w.nombre,onChange:e=>{F({...w,nombre:e.target.value})}})})]}),(0,l.jsxs)("div",{className:"flex flex-col",children:[(0,l.jsx)("div",{className:"mx-2",children:(0,l.jsx)("label",{className:"text-sm text-gray-600",children:"Fecha de Nacimiento"})}),(0,l.jsxs)("div",{children:[" ",(0,l.jsx)("input",{type:"date",max:j(),className:i().inputField,placeholder:"Fecha de Nacimiento",value:w.fechaNac,onChange:e=>{F({...w,fechaNac:e.target.value})}})]})]}),(0,l.jsxs)("div",{className:"flex flex-col",children:[(0,l.jsx)("div",{className:"mx-2",children:(0,l.jsx)("label",{className:"text-sm text-gray-600",children:"Sexo"})}),(0,l.jsx)("div",{children:(0,l.jsxs)("select",{className:i().inputField,value:w.sexo,onChange:e=>{F({...w,sexo:e.target.value})},children:[(0,l.jsx)("option",{value:"",children:"Select..."}),(0,l.jsx)("option",{value:"M",children:"Masculino"}),(0,l.jsx)("option",{value:"F",children:"Femenino"})]})})]})]}),(0,l.jsx)("div",{children:(0,l.jsxs)("div",{className:"flex flex-row mx-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"mx-2",children:"Peso"}),(0,l.jsxs)("div",{className:"w-10",children:[(0,l.jsx)("input",{type:"text",className:i().inputField,placeholder:"Peso (kg)",value:w.peso,onChange:e=>{F({...w,peso:e.target.value})}})," "]})]}),(0,l.jsxs)("div",{className:"mx-8",children:[(0,l.jsx)("div",{className:"mx-2",children:"Estatura"}),(0,l.jsx)("div",{className:"w-20",children:(0,l.jsx)("input",{type:"text",className:i().inputField,placeholder:"Estatura (cm)",value:w.estatura,onChange:e=>{F({...w,estatura:e.target.value})}})})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"mx-2",children:"Padecimientos previos"}),(0,l.jsx)("div",{children:(0,l.jsx)("input",{type:"text",className:i().inputField,placeholder:"Padecimientos previos",value:w.padPrev,onChange:e=>{F({...w,padPrev:e.target.value})}})})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"mx-2",children:"Antecedentes familiares"}),(0,l.jsx)("div",{children:(0,l.jsx)("input",{type:"text",className:i().inputField,placeholder:"Antecedentes familiares",value:w.antFam,onChange:e=>{F({...w,antFam:e.target.value})}})})]})]})})]})]})]}),(0,l.jsx)("div",{className:"flex justify-center",children:(0,l.jsx)("button",{type:"submit",className:"flex justify-center inline-block mt-2 px-6 py-2 text-xs font-medium leading-6 text-center text-white  transition bg-pink-500 rounded-full shadow ripple hover:shadow-lg hover:bg-pink-600 focus:outline-none",children:"Guardar datos"})})]})]})})}r.default.apps.length?r.default.app():r.default.initializeApp({apiKey:"AIzaSyDtekOa7fDUer_k7CeUYK93NDkpYm642U0",authDomain:"pequepulso-d64fb.firebaseapp.com",databaseURL:"https://pequepulso-d64fb-default-rtdb.firebaseio.com",projectId:"pequepulso-d64fb",storageBucket:"pequepulso-d64fb.appspot.com",messagingSenderId:"246492891800",appId:"1:246492891800:web:2d0af2027be31f4e729eed",measurementId:"G-HGL2P05SLH"})},345:function(e){e.exports={main:"page_main__GlU4n",styleA:"page_styleA__YT77A",styleJ:"page_styleJ__TqrMj",styleH:"page_styleH__twr6s",styleS:"page_styleS__b4vLt",styleHu:"page_styleHu__DK5aQ",styleG:"page_styleG__qZwfj",h1:"page_h1__fdyfB",hA:"page_hA__h4N87",hJ:"page_hJ__tumMN",hH:"page_hH__o3Gy8",hS:"page_hS__PBz3w",hHu:"page_hHu__tlqL8",hG:"page_hG__HSW4v",imgResponsive:"page_imgResponsive__WE4Yw",textcontainer:"page_textcontainer__rN6Av",column:"page_column__8vhW8",triangle:"page_triangle__n7aXq",triangleL:"page_triangleL__AR3C0",btn:"page_btn__VzVq_",inputField:"page_inputField__5Rb24",registerContainer:"page_registerContainer__aDNNi",registerBox:"page_registerBox__nvxm6",topBar:"page_topBar__N6Ucl"}}},function(e){e.O(0,[164,676,401,250,898,921,607,971,69,744],function(){return e(e.s=914)}),_N_E=e.O()}]);